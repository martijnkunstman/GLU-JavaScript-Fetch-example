<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="list"></div>
    <div id="detail"></div>

    <script>
      let movieList;
      let movieDetail;
      let listDom = document.querySelector("#list");
      let detailDom = document.querySelector("#detail");

      fetch("movie_list.json") //replace this with API utl
        .then((x) => x.text())
        .then((y) => {
          movieList = JSON.parse(y);
          showList();
        });

      let showList = () => {
        console.log(movieList);
        movieList.map((x) => {
          console.log(x);
          listDom.innerHTML += `<div onclick="showDetail(${x.id})" data_id="${x.id}">${x.name}</div>`;
        });
      };

      function showDetail(id) {
        console.log(id);
        fetch("movie_detail.json") //replace this with API utl (add ?id=1)
          .then((x) => x.text())
          .then((y) => {
            let movieDetail = JSON.parse(y).movie_detail;
            console.log(movieDetail);

            //temp start
            movieDetail.map((x) => {
              if (x.id == id) {
                detailDom.innerHTML = `<div>${x.description}</div>`;
              }
            });
            //temp end

            /*
            //load json with correct PHP API
            detailDom.innerHTML = `<div>${x.description}</div>`;
            */

          });
      }

    </script>
  </body>
</html>
